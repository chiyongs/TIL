# 멱등성

> 멱등성이란?

수학, 컴퓨터 과학 등 여러 분야에서 사용되는 중요한 개념
주로 두 가지 맥락에서 사용

- 연산과 함수에서의 멱등성
- 컴퓨터 프로그래밍 및 시스템 설계에서의 멱등성

> 연산과 함수에서의 멱등성

함수나 연산이 멱등적이라는 것은 입력값에 대해 함수를 여러 번 적용해도 결과가 첫 번째 적용 후와 동일하다는 것을 의미합니다.
예를 들어 절댓값 함수 $|x|$ 는 멱등 함수입니다. ($|x|$의 결과를 다시 절댓값 함수에 적용하면 결과가 변하지 않음)
집합의 합집합 연산도 멱등적입니다.
집합 A에 대해 $AUA = A$ 입니다.

> 컴퓨터 프로그래밍 및 시스템 설계에서의 멱등성

프로그래밍에서 멱등성은 함수나 연산이 여러 번 호출되더라도 시스템의 상태를 변경하지 않거나, 결과가 달라지지 않는 성질을 말합니다.
이는 특히 네트워크 통신이나 테이터베이스 트랜잭션과 같이 실패할 수 있는 환경에서 중요합니다.

예를 들어, HTTP GET 요청은 멱등적이어야 합니다.
여러 번 같은 요청을 보내더라도 서버의 상태는 변하지 않습니다.

반면, POST 요청은 데이터를 추가하기 때문에 멱등적이지 않을 수 있습니다.
멱등성은 시스템 설계에서 오류 발생 시 재시도 메커니즘을 구현하거나, 여러 부분 시스템 간의 일관성을 유지하기 위해 중요한 개념입니다.
이러한 성질 덕분에 개발자는 네트워크 지연, 오류 및 기타 시스템 문제를 효율적으로 처리할 수 있습니다.

> HTTP POST를 멱등적으로 설계하는 방법

1. 고유 키나 토큰 사용

각 POST 요청에 대한 고유한 식별자나 토큰을 사용합니다.
서버는 이 식별자를 체크하여 이미 처리된 요청인지 판단하고, 동일한 요청을 중복으로 처리하지 않도록 합니다.

2. 상태 확인 API 제공

클라이언트가 리소스 생성 요청 전에 해당 리소스의 상태를 확인할 수 있는 방법을 제공합니다.
클라이언트는 이를 통해 리소스의 존재 여부를 확인하고, 이미 존재할 경우 POST 요청을 보내지 않도록 합니다.

3. 리소스의 동일성 검사

서버에서는 요청된 리소스의 내용이 기존 리소스와 중복되는지 검사할 수 있습니다.
중복되는 경우 새로운 리소스 생성을 거부하고, 대신 기존 리소스에 대한 참조를 반환할 수 있습니다.

4. 조건부 처리

서버는 요청 헤더에 포함된 조건을 확인하여 해당 조건을 충족할 때만 리소스를 생성하도록 할 수 있습니다.
조건이 충족되지 않는다면 에러 메세지와 함께 요청을 거부합니다.

HTTP POST 요청을 멱등적으로 설계하는 것은 네트워크 불안정성이나 클라이언트의 중복 요청 상황에서 유용하게 활용할 수 있습니다.
