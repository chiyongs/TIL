# 아이템8. finalizer와 cleaner 사용을 피하라

finalizer와 cleaner는 객체를 소멸할 때 리소스를 적절한 타이밍에 반납하기 위해 기획했던 것들이지만, 사용하면 안된다.

### finalizer와 cleaner의 사용을 피해야 하는 이유

- finalizer와 cleaner는 즉시 수행된다는 보장이 없다.
- finalizer와 cleaner는 실행되지 않을 수도 있다.
- finalizer 동작 중에 예외가 발생하면 정리 작업이 처리되지 않을 수도 있다.
- finalizer와 cleaner는 심각한 성능 문제가 있다.
- finalizer는 보안 문제가 있다.

(finalizer는 자바 9부터 Deprecated되었다.)

만약, 자원 반납을 위해 finalizer를 사용해야 한다면, AutoCloseable을 사용하는 것이 가장 적합하다.

> AutoCloseable

```java
public class AutoClosableIsGood implements AutoClosealbe {
	private BufferedInputStream inputStream;

	@Override
	public void close() {
		try {
			inputStream.close();
		} catch (IOException e) {
			throw new RuntimeException("failed to close " + inputStream);
	}
}
```

AutoCloseable을 구현할 때는 `close()` 만 구현하면 된다.

AutoCloseable을 구현한 클래스를 사용할 때에는 `try, catch, finally` 보다 다음과 같이 사용하는 것이 좋다.

```java
try(AutoClosableIsGood good = new AutoClosableIsGood()) {
	// 자원 반납 처리가 됨
}
```
