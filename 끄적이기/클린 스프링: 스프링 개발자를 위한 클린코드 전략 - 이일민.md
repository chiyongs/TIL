# 클린 코드..

향로..
클린 코드를 지향할수록 점점 구현 능력이 떨어진다

클린 (스프링) 코드

클린 코드 창시자?
켄트 벡
Clean Code That Works

작동하지 않는 클린 코드?

- 전 클린 코드를 추구해서 주석은 작성하지 않습니다
- 코드가 클린 -> 리팩토링할 이유가 없음
- 클린 코드는 버그가 적어서 테스트 코드가 없어도 되지 않나요?
- 클린 코드를 작성해야 해서 일정을 지킬 수 없습니다
- 클린 코드 원칙에 위배되어서 리뷰를 승인할 수 없습니다

클린 코드를 코드 결벽증? 원칙 지향 개발? 느끼게 되는 것인가

## 클린 코드가 강조하는 것

- 읽기 좋은 코드
- 이해하기 좋은 코드
- 확장하기 좋은 코드
- 유지보수하기 좋은 코드

결국, 유지보수성!

그럼 클린 아키텍처는?

품질에 관한 요구사항(비기능적 요구사항)에서 유지보수성은 특별하다
유지보수하기 좋은 코드 : 확장하기 좋고, 안전하고, 신뢰할 수 있고, 좋은 성능으로 발전시킬 수 있고, 상호 호환성이 뛰어나서 변경하기 쉽다.
유지보수성 : 코드의 변경가능성과 동의어

## 생산성

유지보수하기 좋은 클린 코드는 개발 생산성이 떨어지는가?
개발 생산성과 유지보수성은 배타적이거나 대치하는 개념이 아니다

그런데 왜 클린 코드하면 개발 생산성이 떨어진다할까
우리는 유지보수성과 생산성 중에 하나를 선택해야 한다고 생각한다.

토비의 의견 : 개발 생산성과 유지보수성은 서로 영향을 주는 관계이다

## 부채

부채 은유 (Dept Metaphor) : Ward Cunningham
개발하는 소프트웨어에 대한 현재 이해를 반영하는 코드를 작성하고 빠르게 출시
소프트웨어에 대해서 배우게 된 것을 리팩터링을 통해서 코드에 반영
그러지 않으면 이자가 쌓여서 점점 큰 부담

코드를 빠르게 작성하고 출시 : 부채 발행
그로인해 배운 것을 리팩터링 : 부채 상환

부채는 코드를 대충 작성하라는 게 아님
부채는 나쁜 코드에 대한 변명이 될 수 없음
처음부터 리팩터링하기 좋은 코드를 만들어야 함
하지만, 우리는 미래를 모르니 현재 상황에서 최선의 코드를 작성해야 함

부채가 지속적으로 효과를 발휘하려면 리팩터링(부채 상환)이 동력이 되어야 한다.

## 클린 코드 선순환

유지보수성이 좋은 코드는 변경 가능성이 좋음
<-> 빠르게 변경되는 코드는 개발 생산성이 좋음

요구사항 변경이 발생할 때마다 리팩터링을 통해 변경하기 쉬운 코드로 만들어나가자

### 그렇다면, 시작은 어떻게?

개발 시작은 빠르고 간단하게

- 익숙한 기술로
- 핵심 기능이
- 동작하는
- 가장 단순한 코드를
- 리팩터링 하기 좋게 작성

일부 기능을 완벽하게 만드는 것으로 시작 (X)

유지보수성과 생산성의 균형을 잡아줄 리팩터링을 잘 하려면?
테스트!!

하지만, 테스트를 작성하면 구현 능력과 구현 속도가 또.. 발목을...
회사 입장에서 기능의 빠른 출시를 원하는데 테스트로 인해 시간을 소요하고 있으면 회사에서 꾸중을 들을 수 있음..
-> 테스트를 빨리 만들자..

따라서, 테스트를 빠르고 효과적으로 작성하면서 개발하는 능력이 필요

## Clean Code That Works

개발을 시작하는 방법

- 익숙한 기술로
- 핵심 기능이
- 동작하는
- 가장 단순한 코드를
- 리팩터링 하기 좋게 작성

결국은 누구에게??

### 삼체 문제

세 개의 천체가 서로의 중력에 의해 영향을 받으며 움직이는 운동을 예측하는 문제
세 개의 천체 문제는 비선형적이고 일반적인 해를 가지지 않아 예측이 매우 어렵다
각 천체는 다른 두 천체의 중력의 영향을 미쳐 복잡하고 예측 불가능한 운동을 한다.

-> 서로 영향을 주고 있는 것이 세 가지가 존재한다면 매우 복잡해진다

결국, 코드를 다루는 문제는 유지보수성, 생산성, 팀워크 3가지가 영향을 준다.

클린 코드의 많은 원칙은 팀의 동료 개발자와 관련된 것
-> 나만을 위한 클린 코드는 없다

클린 코드의 많은 원칙은 상황에 따라 다른 기준을 가지고 있다

## 탐험

팀과 함께 결정하고 탐험하고 학습하고 성장한다

결정들에 대한 선택지 제시는 시니어가,
결정은 주니어가,
-> 토비가 생각하는 좋은 팀의 방향

함께 탐험하는 것을 즐거워 하는 팀
Great teams make great people.

## 친절

교양있는 개발자
-> 자신의 말을 하더라도 다른 사람의 기분을 나쁘지 않게 하는 것
해야 할 이야기는 해야 함. 해야 할 이야기를 안 하는 것은 교양이 아님

함께 코드를 작성하고, 읽고, 변경할 동료 개발자들에게 친절한 코드

## 스프링 개발에 관련해서 항상 지키는 원칙

- 자기 책임에 충실한 오브젝트로 구분하고 의존관계를 유연하게
- 클린 (자동) 구성 정보
  - 스프링은 결국, 구성 정보와 이를 실행하는 슈도 코드로 이루어진다
- 헥사고날 아키텍처
  - 스프링은 헥사고날 아키텍처를 지원한다.
  - testability, adaptability
- 계층과 모듈 경계에는 API, 즉 인터페이스를 사용
- 테스트를 안 만들거면 스프링을 뭐하러?
- DB 테스트에는 `@Transactional` 을 사용!
