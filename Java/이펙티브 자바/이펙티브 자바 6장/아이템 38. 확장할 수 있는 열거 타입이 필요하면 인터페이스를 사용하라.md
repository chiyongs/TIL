# 아이템 38. 확장할 수 있는 열거 타입이 필요하면 인터페이스를 사용하라

## 열거 타입 확장?

열거 타입은 확장이 불가능하다.

- 열거 타입을 확장하는 것은 좋지 않다.

  - 확장한 타입의 원소는 기반 타입의 원소로 취급, but 그 반대는 성립하지 않음

  ```java
  public class Human {
  }

  public class Son extends Human {
  }
  ```

  - 기반 타입과 확장된 타입들의 원소 모두를 순회할 수 있는 방법 X
  - 확장성을 높이려면 고려해야할 요소가 늘어나 설계와 구현이 복잡해짐

하지만, 열거 타입을 확장해서 사용해야하는 경우도 존재

## 열거 타입을 확장해서 사용하는 방법

열거 타입은 인터페이스를 구현할 수 있음
→ 인터페이스를 정의
→ 열거 타입이 인터페이스를 구현

열거 타입을 확장해서 사용하려면 해당 인터페이스를 새로운 열거 타입으로 구현하면 됨
이렇게 인터페이스를 활용하여 열거 타입을 구현하면 얻게 되는 장점

- 사용중이던 기존 열거 타입을 대신하여 사용해야 할 새로운 열거 타입을 끼워넣을 수 있다.

> 한정적 타입 토큰

- 비한정적 타입 토큰 : `Class<T>`
- 한정적 타입 토큰 : `Class<T extends Smth>`

한정적 타입 토큰을 사용하면 전달되는 타입을 해당 클래스 및 클래스의 하위 클래스들로만 제한할 수 있다.

> 한정적 와일드카드 타입

- 비한정적 와일드카드 타입 : `Class<?>`
- 한정적 와일드카드 타입 : `Class<? extends Smth>`

한정적 와일드카드 타입도 한정적 타입 토큰처럼 전달되는 타입을 해당 클래스 및 하위 클래스로 제한이 가능하다.

### 단점

열거 타입끼리 구현을 상속할 수 없다.

→ 중복 코드가 늘어날 가능성이 높다.

공유하는 기능이 많다면 별도의 도우미 클래스나 정적 도우미 메서드로 분리하는 방식으로 해결해야 한다.

## 정리

열거 타입 자체는 확장 불가, but 인터페이스와 인터페이스를 구현하는 기본 열거 타입을 함께 사용해 같은 효과를 낼 수 있다.

API가 인터페이스 기반으로 작성되었다면 기본 열거 타입의 인스턴스가 쓰이는 모든 곳을 새로 확장한 열거 타입의 인스턴스로 대체 가능하다.
