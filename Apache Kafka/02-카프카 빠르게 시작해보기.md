#### 해당 TIL은 **최원영님의 아파치 카프카 애플리케이션 프로그래밍 with 자바** 책으로 공부한 내용을 정리한 글입니다.
<img src="images/아파치 카프카 애플리케이션 프로그래밍 with 자바.jpeg" alt="">

## 실습용 카프카 브로커 설치
AWS EC2 인스턴스를 생성하고 해당 인스턴스에 카프카를 구축한다.
<img src="images/EC2 생성.png">
Amazon Machine Image는 Amazon Linux 2를 선택한다.
Amazon Linux 2는 Amazon에서 직접 만든 템플릿으로 EC2에 최적화되어 있다.

### AWS EC2 아키텍처 유형
<img src="images/EC2 아키텍처 유형.png">
아키텍처 유형에는 x86과 Arm 아키텍처 두 가지가 존재하는데 Intel 칩 기반 x86을 선택한다.

### AWS EC2 인스턴스 유형
<img src="images/EC2 인스턴스 유형.png">
EC2 인스턴스 유형은 프리티어로 사용할 수 있는 t2.micro로 설정한다.

### AWS EC2 인바운드 규칙
<img src="images/EC2 인바운드 규칙.png">
- 카프카 브로커의 기본 포트 : 9092
- 주키퍼의 기본 포트 : 2181

카프카 브로커와 주키퍼 접근을 위해 두 포트에 대한 인바운드 규칙을 추가한다.

### ssh 접속
<img src="images/EC2 ssh 접속.png">
EC2 생성 시 만든 pem키를 사용해 로컬에서 EC2 인스턴스로 ssh 접속한다.

### 인스턴스에 자바 설치
카프카 브로커를 실행하기 위해서는 JDK가 필요하다.
카프카 브로커는 스칼라와 자바로 작성되어 JVM 환경 위에서 실행되기 때문이다.
```shell
sudo yum install 0y java-1.8.0-openjdk.devel.x86_64
```
<img src="images/Java 버전.png">