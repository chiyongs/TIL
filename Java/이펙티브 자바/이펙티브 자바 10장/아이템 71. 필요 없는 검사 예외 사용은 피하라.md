# 아이템 71. 필요 없는 검사 예외 사용은 피하라

## 검사 예외

검사 예외를 싫어하는 자바 프로그래머가 많지만 제대로 활용하면 API와 프로그램의 질을 높일 수 있다.

결과를 코드로 반환하거나 비검사 예외를 던지는 것과 달리, 검사 예외는 발생한 문제를 프로그래머가 처리하여 안전성을 높이게끔 해준다.

하지만, 과도하게 사용하면 오히려 쓰기 불편한 API가 된다.

더구나 검사 예외를 던지는 메서드는 스트림 안에서 직접 사용할 수 없기 때문에 자바 8부터는 부담이 더욱 커졌다.

API를 제대로 사용해도 발생할 수 있는 예외이거나, 프로그래머가 의미 있는 조치를 취할 수 있는 경우 → 검사 예외 사용

그러나, 둘 중 어디에도 해당하지 않는다면 비검사 예외 사용

검사 예외가 프로그래머에게 지우는 부담은 메서드가 단 하나의 검사 예외만을 던질 때가 가장 크다.

검사 예외가 단 하나뿐이라면 오직 그 예외 때문에 API 사용자는 try 블록을 추가해야 하고 스트림에서 직접 사용하지 못하게 된다.

### 검사 예외를 회피하는 방법

> 가장 쉬운 방법

적절한 결과 타입을 담은 옵셔널을 반환하는 것

검사 예외를 던지는 대신 단순히 빈 옵셔널을 반환한다.

단점

- 예외가 발생한 이유를 알려주는 부가 정보를 담을 수 없다

→ 예외를 사용하면 구체적인 예외 타입과 그 타입이 제공하는 메서드들을 활용해 부가 정보를 제공할 수 있다

> 또 다른 방법

검사 예외를 던지는 메서드를 2개로 쪼개 비검사 예외로 바꿀 수 있다.

ex) 상태 검사 메서드와 비검사 예외를 던지는 메서드

이 방법은 모든 경우에 적용할 수는 없지만, 적용할 수 있다면 더 쓰기 편한 API를 제공할 수 있다.

또한, 상태 검사 메서드의 단점이 그대로 적용되니 주의해야 한다.

상태 검사 메서드의 단점

- 외부 동기화 없이 여러 스레드가 동시에 접근할 수 있거나 외부 요인에 의해 상태가 변할 수 있으면 사용하면 안된다
- 상태 검사 메서드가 상태 수행 메서드의 작업 일부를 중복 수행한다면 성능에서 손해이다.
